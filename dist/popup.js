define("arale/popup/1.0.2/popup",["$","arale/overlay/1.0.1/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.1/iframe-shim","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events"],function(e,t,i){function s(e,t,i,s){s&&s[0]?s.on(e,t.selector,i):t.on(e,i)}var n=e("$"),o=e("arale/overlay/1.0.1/overlay"),r=o.extend({attrs:{trigger:{value:null,getter:function(e){return n(e)}},triggerType:"hover",delegateNode:{value:null,getter:function(e){return n(e)}},align:{value:{baseXY:[0,"100%"],selfXY:[0,0]},setter:function(e){return e?(e.baseElement?this._specifiedBaseElement=!0:this.activeTrigger&&(e.baseElement=this.activeTrigger),e):void 0},getter:function(e){return n.extend({},e,this._specifiedBaseElement?{}:{baseElement:this.activeTrigger})}},delay:70,disabled:!1,effect:"",duration:250},setup:function(){r.superclass.setup.call(this),this._bindTrigger(),this._blurHide(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},show:function(){return this.get("disabled")?void 0:r.superclass.show.call(this)},toggle:function(){this[this.get("visible")?"hide":"show"]()},_bindTrigger:function(){var e=this.get("triggerType");"click"===e?this._bindClick():"focus"===e?this._bindFocus():this._bindHover()},_bindClick:function(){var e=this;s("click",this.get("trigger"),function(t){t.preventDefault(),e.activeTrigger=n(this),e.toggle()}),this.get("delegateNode")},_bindFocus:function(){var e=this;s("focus",this.get("trigger"),function(){e.activeTrigger=n(this),e.show()}),this.get("delegateNode"),s("blur",this.get("trigger"),function(){setTimeout(function(){!e._downOnElement&&e.hide(),e._downOnElement=!1},e.get("delay"))}),this.get("delegateNode"),this.element.on("mousedown",function(){e._downOnElement=!0})},_bindHover:function(){function e(){clearTimeout(t),t=null,g.get("visible")&&(i=setTimeout(function(){g.hide()},a))}var t,i,o=this.get("trigger"),r=this.get("delegateNode"),a=this.get("delay"),g=this;return 0>a?(this._bindTooltip(),void 0):(s("mouseover",o,function(){clearTimeout(i),i=null,g.activeTrigger=n(this),t=setTimeout(function(){g.show()},a)},r),s("mouseout",o,e,r),this.element.hover(function(){clearTimeout(i)},e),void 0)},_bindTooltip:function(){var e=this.get("trigger"),t=this.get("delegateNode"),i=this;s("mouseover",e,function(){i.activeTrigger=n(this),i.show()},t),s("mouseout",e,function(){i.hide()},t)},_onRenderVisible:function(e){var t=-1!==this.get("effect").indexOf("fade"),i=-1!==this.get("effect").indexOf("slide"),s={};i&&(s.height=e?"show":"hide"),t&&(s.opacity=e?"show":"hide"),t||i?(this.element.stop(!0,!0).animate(s,this.get("duration")).css({visibility:"visible"}),this.off("after:show")):this.element[e?"show":"hide"]()}});i.exports=r});
