define("arale/popup/1.1.0/popup",["$","arale/overlay/1.1.0/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.1.0/class","arale/events/1.1.0/events"],function(e,t,i){var s=e("$"),n=e("arale/overlay/1.1.0/overlay"),r=n.extend({attrs:{trigger:{value:null,getter:function(e){return s(e)}},triggerType:"hover",delegateNode:{value:null,getter:function(e){var t=s(e);return t.length||(t=this.get("trigger").parent()),t}},align:{value:{baseXY:[0,"100%"],selfXY:[0,0]},setter:function(e){return e?(e.baseElement?this._specifiedBaseElement=!0:this.activeTrigger&&(e.baseElement=this.activeTrigger),e):void 0},getter:function(e){return s.extend({},e,this._specifiedBaseElement?{}:{baseElement:this.activeTrigger})}},delay:70,disabled:!1,effect:"",duration:250},setup:function(){r.superclass.setup.call(this),this._bindTrigger(),this._blurHide(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},show:function(){return this.get("disabled")?void 0:r.superclass.show.call(this)},_bindTrigger:function(){var e=this.get("triggerType");"click"===e?this._bindClick():"focus"===e?this._bindFocus():this._bindHover()},_bindClick:function(){function e(e){t.get("disabled")||t.get("trigger").each(function(i,n){e==n?(n._active=!0,t.activeTrigger=s(n)):n._active=!1})}var t=this;this.delegateEvents(this.get("delegateNode"),"click "+this.get("trigger").selector,function(t){t.preventDefault();var i=t.currentTarget;i._active===!0?this.hide():(e(i),this.show())}),this.before("hide",function(){e()})},_bindFocus:function(){var e=this,t=this.get("trigger"),i=this.get("delegateNode");this.delegateEvents(i,"focus "+t.selector,function(e){this.activeTrigger=s(e.currentTarget),this.show()}),this.delegateEvents(i,"blur "+t.selector,function(){setTimeout(function(){!e._downOnElement&&e.hide(),e._downOnElement=!1},this.get("delay"))}),this.delegateEvents("mousedown",function(){this._downOnElement=!0})},_bindHover:function(){function e(){clearTimeout(t),t=null,this.get("visible")&&(i=setTimeout(function(){o.hide()},a))}var t,i,n=this.get("trigger"),r=this.get("delegateNode"),a=this.get("delay"),o=this;return 0>a?(this._bindTooltip(),void 0):(this.delegateEvents(r,"mouseenter "+n.selector,function(e){clearTimeout(i),i=null,this.activeTrigger=s(e.currentTarget),t=setTimeout(function(){o.show()},a)}),this.delegateEvents(r,"mouseleave "+n.selector,e),this.delegateEvents("mouseenter",function(){clearTimeout(i)}),this.delegateEvents("mouseleaver",e),void 0)},_bindTooltip:function(){var e=this.get("trigger"),t=this.get("delegateNode");this.delegateEvents(t,"mouseenter "+e.selector,function(e){this.activeTrigger=s(e.currentTarget),this.show()}),this.delegateEvents(t,"mouseleave "+e.selector,function(){this.hide()})},_onRenderVisible:function(e){var t=-1!==this.get("effect").indexOf("fade"),i=-1!==this.get("effect").indexOf("slide"),s={};i&&(s.height=e?"show":"hide"),t&&(s.opacity=e?"show":"hide"),t||i?this.element.stop(!0,!0).animate(s,this.get("duration")).css({visibility:"visible"}):this.element[e?"show":"hide"]()}});i.exports=r});
